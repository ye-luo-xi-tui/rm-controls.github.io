<!doctype html>
<html lang="zh-cn" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<title data-react-helmet="true">ä»£ç è§„èŒƒ | rm-controls documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://rm-controls.github.io/rm-controls-docs/dev_guide/code_style"><meta data-react-helmet="true" name="docusaurus_locale" content="zh-cn"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="ä»£ç è§„èŒƒ | rm-controls documentation"><meta data-react-helmet="true" name="description" content="æˆ‘ä»¬ä½¿ç”¨åœ¨C++å¼€å‘ä¸­ä½¿ç”¨ ROS C++ Style guide ï¼Œåœ¨Pythonå¼€å‘ä¸­ï¼ˆå¾ˆå°‘ï¼‰ä½¿ç”¨ ROS Python Style guide , ä½ è¿˜å¯ä»¥å°† rosbestpracitces ä½œä¸ºæ¨¡ç‰ˆå‚è€ƒ."><meta data-react-helmet="true" property="og:description" content="æˆ‘ä»¬ä½¿ç”¨åœ¨C++å¼€å‘ä¸­ä½¿ç”¨ ROS C++ Style guide ï¼Œåœ¨Pythonå¼€å‘ä¸­ï¼ˆå¾ˆå°‘ï¼‰ä½¿ç”¨ ROS Python Style guide , ä½ è¿˜å¯ä»¥å°† rosbestpracitces ä½œä¸ºæ¨¡ç‰ˆå‚è€ƒ."><link data-react-helmet="true" rel="shortcut icon" href="/rm-controls-docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://rm-controls.github.io/rm-controls-docs/dev_guide/code_style"><link data-react-helmet="true" rel="alternate" href="https://rm-controls.github.io/rm-controls-docs/en/dev_guide/code_style" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://rm-controls.github.io/rm-controls-docs/dev_guide/code_style" hreflang="zh-cn"><link data-react-helmet="true" rel="alternate" href="https://rm-controls.github.io/rm-controls-docs/dev_guide/code_style" hreflang="x-default"><link rel="stylesheet" href="/rm-controls-docs/assets/css/styles.3846b7e9.css">
<link rel="preload" href="/rm-controls-docs/assets/js/runtime~main.beeb6dbc.js" as="script">
<link rel="preload" href="/rm-controls-docs/assets/js/main.f64dfcee.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" role="banner"><div class="announcementBarContent_3EUC announcementBarCloseable_3myR">â­ï¸ If you like rm-controls, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/rm-controls/rm_control">rm_control</a> and <a target="_blank" rel="noopener noreferrer" href="https://github.com/rm-controls/rm_control">rm_controllers</a> ! â­ï¸</div><button type="button" class="announcementBarClose_38nx clean-btn" aria-label="Close"><span aria-hidden="true">Ã—</span></button></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rm-controls-docs/"><img src="/rm-controls-docs/img/logo.png" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/rm-controls-docs/img/logo.png" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">rm-controls</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link navbar__link--active" href="/rm-controls-docs/overview/intro">Docs</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" class="iconLanguage_3vod"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>ä¸­æ–‡</span></span></a><ul class="dropdown__menu"><li><a href="/rm-controls-docs/en/dev_guide/code_style" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">English</a></li><li><a href="/rm-controls-docs/dev_guide/code_style" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">ä¸­æ–‡</a></li></ul></div><a href="https://github.com/rm-controls" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ğŸŒ</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_MM2z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_s5VG searchBarLoadingRing_2jQk"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo sidebarWithHideableNavbar_267A"><a tabindex="-1" class="sidebarLogo_3h0W" href="/rm-controls-docs/"><img src="/rm-controls-docs/img/logo.png" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/rm-controls-docs/img/logo.png" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m"><b>rm-controls</b></a><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">æ¦‚è¿°</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">å¿«é€Ÿå…¥é—¨</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">å¼€å‘æŒ‡å—</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rm-controls-docs/dev_guide/code_style">ä»£ç è§„èŒƒ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/rm-controls-docs/dev_guide/ide_config">CLion IDE é…ç½®</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Digging deeper</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1>ä»£ç è§„èŒƒ</h1></header><p>æˆ‘ä»¬ä½¿ç”¨åœ¨C++å¼€å‘ä¸­ä½¿ç”¨ <a href="http://wiki.ros.org/CppStyleGuide" target="_blank" rel="noopener noreferrer">ROS C++ Style guide</a> ï¼Œåœ¨Pythonå¼€å‘ä¸­ï¼ˆå¾ˆå°‘ï¼‰ä½¿ç”¨ <a href="http://wiki.ros.org/PyStyleGuide" target="_blank" rel="noopener noreferrer">ROS Python Style guide</a> , ä½ è¿˜å¯ä»¥å°† <a href="https://github.com/leggedrobotics/ros_best_practices" target="_blank" rel="noopener noreferrer">ros_best_pracitces</a> ä½œä¸ºæ¨¡ç‰ˆå‚è€ƒ.</p><p>ä¸ºäº†è®©ä½ çš„å¼€å‘æ›´æ–¹ä¾¿, æˆ‘ä»¬æ¨èä½ ä½¿ç”¨ å¸¦æœ‰ROSé…ç½®çš„ <code>clang-format</code> å’Œ CLion IDE - è¯¦è§ä¸‹æ–¹.</p><p>æ­¤å¤– rm-controls æœ‰ä¸€äº›é¢å¤–çš„æ ·å¼åå¥½ï¼š</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="c"></a>C++<a class="hash-link" href="#c" title="Direct link to heading">#</a></h2><ul><li>æˆ‘ä»¬ä½¿ç”¨ C++14</li><li>å°½å¯èƒ½ä½¿ç”¨ C++ æ ‡å‡†åº“ (<code>std::</code>) </li><li>é¿å…ä½¿ç”¨ C é£æ ¼çš„å‡½æ•°ï¼Œæ¯”å¦‚ï¼š <code>FLT_EPSILON</code> å’Œ <code>(int)()</code>-  è€Œæ˜¯ä½¿ç”¨ <code>std::numeric_limits&lt;double&gt;::epsilon()</code> å’Œ <code>static_cast&lt;int&gt;()</code></li><li>å½“åŠŸèƒ½åœ¨æ ‡å‡†åº“ä¸­ä¸å¯ç”¨æ—¶ï¼Œé¼“åŠ±ä½¿ç”¨ Boost åº“</li><li>åœ¨æ ‡é¢˜ä¸­ä½¿ç”¨ <code>#pragma once</code> è€Œä¸æ˜¯ &quot;include guards&quot;</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="ä»£ç å†…æ–‡æ¡£"></a>ä»£ç å†…æ–‡æ¡£<a class="hash-link" href="#ä»£ç å†…æ–‡æ¡£" title="Direct link to heading">#</a></h2><ul><li>æˆ‘ä»¬ä½¿ç”¨ Doxygen é£æ ¼çš„æ³¨é‡Š</li><li>å¯¹äºæœªæ¥çš„å·¥ä½œï¼Œä½¿ç”¨ <code>TODO(username): description</code></li><li>æ·»åŠ å¤§é‡æ³¨é‡Šä»¥è§£é‡Šå¤æ‚çš„ä»£ç éƒ¨åˆ†</li><li>æ›´åå‘ä½¿ç”¨å®Œæ•´çš„ã€æè¿°æ€§çš„å˜é‡åç§°è€Œä¸æ˜¯ç®€çŸ­çš„å­—æ¯ - ä¾‹å¦‚ <code>robot_state_</code> ä¼˜äº <code>rs_</code></li><li>å¦‚æœå˜é‡ç±»å‹ä¸èƒ½ä»ä¸Šä¸‹æ–‡ä¸­ç«‹å³å˜å¾—æ¸…æ™°ï¼ˆä¾‹å¦‚ä» <code>make_shared&lt;...&gt;</code>ï¼‰ï¼Œé¿å…ä½¿ç”¨ <code>auto</code></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="exceptions"></a>Exceptions<a class="hash-link" href="#exceptions" title="Direct link to heading">#</a></h2><ul><li>æ•è·å·²çŸ¥å¼‚å¸¸å¹¶è¯¦ç»†è®°å½•å®ƒä»¬ã€‚ é¿å…ä½¿ç”¨ <code>catch (...)</code> å› ä¸ºå®ƒéšè—äº†æœ‰å…³å¯èƒ½æ•…éšœçš„ä¿¡æ¯ã€‚ æˆ‘ä»¬æƒ³çŸ¥é“æ˜¯å¦æœ‰é—®é¢˜ã€‚</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="logging"></a>Logging<a class="hash-link" href="#logging" title="Direct link to heading">#</a></h2><ul><li>ä½¿ç”¨ROS loggingåŠŸèƒ½å’Œå‘½åç©ºé—´ï¼Œå¦‚ï¼š <code>ROS_INFO_NAMED(LOGNAME, &quot;Starting listener...</code>.<ul><li>è¿™ä½¿å¾—åœ¨å‘½ä»¤è¡Œä¸Šæ›´å®¹æ˜“ç†è§£è¾“å‡ºæ¥è‡ªå“ªé‡Œï¼Œå¹¶å…è®¸å¯¹ç»ˆç«¯è¾“å‡ºçš„ä¿¡æ¯è¿›è¡Œæ›´è¯¦ç»†çš„ç­›é€‰ã€‚</li><li>æ—¥å¿—å‘½åç©ºé—´åº”è¯¥è¢«å®šä¹‰ä¸ºä¸€ä¸ª <code>const</code> å˜é‡ã€‚ ï¼ˆä¾‹å¦‚ï¼š<code>constexpr char LOGNAME[] = &quot;robot_state&quot;;</code>)</li><li>ä½¿ç”¨æ–‡ä»¶åä½œä¸º LOGNAMED å‘½åç©ºé—´æ˜¯æœ€ä½³çš„ï¼Œå³ <code>hardware_interface.cpp</code> å°†ä½¿ç”¨ <code>&quot;hardware_interface&quot;</code></li><li>é¿å…ä½¿ç”¨åŒ…åç§°ä½œä¸ºå‘½åç©ºé—´ï¼Œå› ä¸ºå®ƒå·²ç»ä¼šè¢« logger è¾“å‡ºã€‚</li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="å¼ƒç”¨"></a>å¼ƒç”¨<a class="hash-link" href="#å¼ƒç”¨" title="Direct link to heading">#</a></h2><ul><li>å¼ƒç”¨å‡½æ•°ä½¿ç”¨ C++14 <a href="https://en.cppreference.com/w/cpp/language/attributes/deprecated" target="_blank" rel="noopener noreferrer"> <code>[[deprecated]]</code> </a> å±æ€§</li><li>æ·»åŠ ä¸€æ¡æœ‰ç”¨çš„æ¶ˆæ¯æ¥æè¿°å¦‚ä½•å¤„ç†è¿™ç§æƒ…å†µï¼š</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">[</span><span class="token function" style="color:#d73a49">deprecated</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;use bar instead&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">void</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">foo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>è¿™å°†å¯¼è‡´ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">  warning: &#x27;foo&#x27; is deprecated: use bar instead [-Wdeprecated-declarations] foo(); ^ note: &#x27;foo&#x27; has been explicitly marked deprecated here void foo() {} ^</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>æ·»åŠ ç›¸å…³çš„ TODOï¼Œæè¿°ä½•æ—¶åˆ é™¤è¯¥åŠŸèƒ½ï¼ˆæ—¥æœŸå’Œ/æˆ– ROS ç‰ˆæœ¬ï¼‰</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="pre-commit-æ ¼å¼æ£€æŸ¥å™¨"></a>pre-commit æ ¼å¼æ£€æŸ¥å™¨<a class="hash-link" href="#pre-commit-æ ¼å¼æ£€æŸ¥å™¨" title="Direct link to heading">#</a></h2><p>åœ¨æˆ‘ä»¬çš„è®¸å¤šå­˜å‚¨åº“ä¸­ï¼Œæœ‰ä¸€ä¸ªåœ¨ CI ä¸­è¿è¡Œçš„ <a href="https://pre-commit.com/" target="_blank" rel="noopener noreferrer">pre-commit</a> æ£€æŸ¥ã€‚
ä½ å¯ä»¥åœ¨æœ¬åœ°ä½¿ç”¨å®ƒå¹¶å°†å…¶è®¾ç½®ä¸ºåœ¨æäº¤ä¹‹å‰è‡ªåŠ¨è¿è¡Œï¼Œä»è€Œé¿å…å› ä¸ºæ ¼å¼é”™è¯¯è€Œæ— æ³•é€šè¿‡CIã€‚
è¦å®‰è£…ï¼Œè¯·ä½¿ç”¨ pipï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">pip3 install pre-commit</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>è¦æ‰‹åŠ¨è¿è¡Œ repo ä¸­çš„æ‰€æœ‰æ–‡ä»¶ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">pre-commit run -a</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>è¦åœ¨æœ¬åœ°å­˜å‚¨åº“ä¸­æäº¤ä¹‹å‰è‡ªåŠ¨è¿è¡Œ pre-commitï¼Œè¯·åœ¨æœ¬åœ°ä»“åº“ç›®å½•ä¸­è¿è¡Œä»¥ä¸‹æŒ‡ä»¤å®‰è£… git hooksï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">pre-commit install</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="clang-format-è‡ªåŠ¨ä»£ç æ ¼å¼åŒ–"></a>clang-format è‡ªåŠ¨ä»£ç æ ¼å¼åŒ–<a class="hash-link" href="#clang-format-è‡ªåŠ¨ä»£ç æ ¼å¼åŒ–" title="Direct link to heading">#</a></h2><p>è¯·æ³¨æ„ï¼Œå¦‚æœæ‚¨å¦‚ä¸Šæ‰€è¿°ä½¿ç”¨é¢„æäº¤ï¼Œåˆ™æ¯æ¬¡æäº¤ä¹‹å‰éƒ½ä¼šè‡ªåŠ¨è¿è¡Œ clang-formatï¼ˆå¦‚æœå®‰è£…äº† <code>clang-format-10</code>ï¼‰ã€‚ æœ¬èŠ‚ä»‹ç»å¦‚ä½•æ‰‹åŠ¨ä½¿ç”¨å®ƒã€‚</p><p>æ‚¨å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼è¿è¡Œ <strong>clang-format</strong>ã€‚ è¦åœ¨ Ubuntu ä¸Šå®‰è£…ï¼Œåªéœ€è¿è¡Œï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt install clang-format-10</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ä¾èµ– clang æ ¼å¼ç‰ˆæœ¬ <strong>10</strong>ã€‚ é—æ†¾çš„æ˜¯ï¼Œè¾ƒæ–°çš„ç‰ˆæœ¬å¹¶ä¸å®Œå…¨å‘åå…¼å®¹ã€‚</p><p>clang-format éœ€è¦åœ¨ catkin å·¥ä½œåŒºçš„æ ¹ç›®å½•ä¸‹æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œrm-controls çš„æ¯ä¸ªä»“åº“çš„æ ¹ç›®å½•ä¸­éƒ½æä¾›äº†ç›¸åŒçš„é…ç½®æ–‡ä»¶ã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3R7-" id="command-line"></a>Command Line<a class="hash-link" href="#command-line" title="Direct link to heading">#</a></h3><p>æ ¼å¼åŒ–å•ä¸ªæ–‡ä»¶ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">clang-format-10 -i -style=file MY_FLIE_NAME.cpp</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>é€’å½’æ ¼å¼åŒ–æ•´ä¸ªç›®å½•ï¼ŒåŒ…æ‹¬å­æ–‡ä»¶å¤¹ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">find . -name &#x27;*.h&#x27; -or -name &#x27;*.hpp&#x27; -or -name &#x27;*.cpp&#x27; | xargs clang-format-10 -i -style=file $1</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3R7-" id="clang-format-çš„ä¾‹å¤–"></a>clang-format çš„ä¾‹å¤–<a class="hash-link" href="#clang-format-çš„ä¾‹å¤–" title="Direct link to heading">#</a></h3><p>æœ‰æ—¶ï¼Œ clang-format ä½¿ç”¨çš„è‡ªåŠ¨æ ¼å¼åŒ–å¯èƒ½æ²¡æœ‰æ„ä¹‰ï¼Œä¾‹å¦‚ ç”¨äºåœ¨å•ç‹¬çš„è¡Œä¸Šæ›´å®¹æ˜“é˜…è¯»çš„é¡¹ç›®åˆ—è¡¨ã€‚ å®ƒå¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤è¦†ç›–ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// clang-format off</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> some untouched code</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// clang-format on</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ä¸è¿‡è¯·è°¨æ…ä½¿ç”¨ã€‚</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>ä½¿ç”¨å‘½ä»¤è¡Œå¤ªå¤´ç–¼äº†? è¯•è¯• <a href="/rm-controls-docs/dev_guide/ide_config">CLion IDE é…ç½® </a>.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="clang-tidy-linting"></a>clang-tidy Linting<a class="hash-link" href="#clang-tidy-linting" title="Direct link to heading">#</a></h2><p><strong>clang-tidy</strong> æ˜¯ C++ çš„ linting å·¥å…·ã€‚ <strong>clang-format</strong> ç”¨äºä¿®å¤ä»£ç æ ¼å¼
ï¼ˆé”™è¯¯çš„ç¼©è¿›ã€è¡Œé•¿ç­‰ï¼‰ï¼Œè€Œ<strong>clang-tidy</strong> å°†ä¿®å¤ç¼–ç¨‹é”™è¯¯ä»¥ä½¿æ‚¨çš„ä»£ç 
æ›´ç°ä»£ï¼Œæ›´æ˜“è¯»ï¼Œæ›´ä¸å®¹æ˜“å‡ºç°å¸¸è§é”™è¯¯ã€‚</p><p>æ‚¨å¯ä»¥å®‰è£… clang-tidy å’Œå…¶ä»–ä¸ clang ç›¸å…³çš„å·¥å…·
<code>sudo apt install clang-tidy clang-tools</code></p><p>ä¸ clang-format ç±»ä¼¼ï¼Œclang-tidy ä½¿ç”¨åœ¨å‘ä¸Šéå†æºæ–‡ä»¶å¤¹å±‚æ¬¡ç»“æ„æ—¶é¦–å…ˆæ‰¾åˆ°çš„é…ç½®æ–‡ä»¶ <code>.clang-tidy</code>ã€‚ æ‰€æœ‰ rm-controls å­˜å‚¨åº“éƒ½åœ¨å­˜å‚¨åº“æ ¹æ–‡ä»¶ä¸­æä¾›ç›¸åŒçš„æ–‡ä»¶ã€‚</p><p>ä¸ clang-format ä¸åŒï¼Œclang-tidy éœ€è¦çŸ¥é“ç”¨äºæ„å»ºé¡¹ç›®çš„ç¡®åˆ‡ç¼–è¯‘å™¨é€‰é¡¹ã€‚ è¦æä¾›å®ƒä»¬ï¼Œè¯·ä½¿ç”¨ <code>-DCMAKE_EXPORT_COMPILE_COMMANDS=ON</code> é…ç½® cmakeï¼Œcmake å°†åœ¨åŒ…çš„æ„å»ºæ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªåä¸º <code>compile_commands.json</code> çš„æ–‡ä»¶ã€‚ æ„å»ºå®Œæˆåï¼Œæ‚¨å¯ä»¥è¿è¡Œ clang-tidy æ¥åˆ†ææ‚¨çš„ä»£ç ï¼Œç”šè‡³å¯ä»¥è‡ªåŠ¨ä¿®å¤é—®é¢˜ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">for file in $(find $CATKIN_WS/build -name compile_commands.json) ; do</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    run-clang-tidy -fix -header-filter=&quot;$CATKIN_WS/.*&quot; -p $(dirname $file)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">done</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>æ‚¨è¿˜å¯ä»¥é€šè¿‡æŒ‡å®šæ­£åˆ™è¡¨è¾¾å¼æ¥åŒ¹é…æ–‡ä»¶åï¼Œåœ¨é€‰å®šçš„æ–‡ä»¶å¤¹æˆ–åŒ…æ–‡ä»¶ä¸Šè¿è¡Œå®ƒï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly sh"><pre tabindex="0" class="prism-code language-sh codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">run-clang-tidy -fix -header-filter=&quot;$CATKIN_WS/.*&quot; -p $CATKIN_WS/build/rm_hw rm_hw</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>è¯·æ³¨æ„ï¼Œå¦‚æœæ‚¨æœ‰å¤šå±‚åµŒå¥—çš„â€œforâ€å¾ªç¯éœ€è¦è½¬æ¢ï¼Œclang-tidy
ä¸€æ¬¡åªä¼šä¿®å¤ä¸€ä¸ªã€‚ æ‰€ä»¥ä¸€å®šè¦å¤šæ¬¡è¿è¡Œä¸Šé¢çš„å‘½ä»¤æ¥è½¬æ¢æ‰€æœ‰ä»£ç ã€‚</p><p>å¦‚æœæ‚¨åªå¯¹è­¦å‘Šæ„Ÿå…´è¶£ï¼Œclang-tidy ä¹Ÿå¯ä»¥åœ¨æ„å»ºæœŸé—´ç›´æ¥è¿è¡Œã€‚
æ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œç‰¹å®šçš„ clang-tidy æ„å»ºï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">catkin config --cmake-args -DCMAKE_EXPORT_COMPILE_COMMANDS=ON -DCMAKE_CXX_CLANG_TIDY=clang-tidy</span></span><span class="token-line" style="color:#393A34"><span class="token plain">catkin build</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>ä½¿ç”¨å‘½ä»¤è¡Œå¤ªå¤´ç–¼äº†? <a href="https://www.jetbrains.com/help/clion/clang-tidy-checks-support.html" target="_blank" rel="noopener noreferrer">CLion IDE è‡ªå¸¦ clang-tidy</a>ï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithHideOnScrollNavbar_3R7-" id="clang-tidyçš„ä¾‹å¤–"></a>clang-tidyçš„ä¾‹å¤–<a class="hash-link" href="#clang-tidyçš„ä¾‹å¤–" title="Direct link to heading">#</a></h3><p>å¯ä»¥é€šè¿‡ä½¿ç”¨ <strong>NOLINT</strong> æˆ– <strong>NOLINTNEXTLINE</strong> æ³¨é‡Šæ¥æŠ‘åˆ¶ä¸éœ€è¦çš„ clang-tidy æ£€æŸ¥ã€‚ è¯·åœ¨æ³¨é‡Šåçš„æ‹¬å·ä¸­æ˜ç¡®æŒ‡å®šcheckçš„åç§°ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> IKCallbackFn solution_callback </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// NOLINT(modernize-use-nullptr)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// NOLINTNEXTLINE(performance-unnecessary-copy-initialization)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">robot_state</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">RobotState </span><span class="token function" style="color:#d73a49">robot_state</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">default_state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>è¯·æ³¨æ„ï¼Œ<code>modernize-loop-convert</code> æ£€æŸ¥å¯èƒ½ä¼šå°† <code>for (...; ...; ...)</code> å¾ªç¯è½¬æ¢ä¸º <code>for (auto &amp; ... : ...)</code>ã€‚
ç„¶è€Œï¼Œ<code>auto</code> æœ‰æ—¶å€™ä¸æ˜¯ä¸€ä¸ªé«˜åº¦å¯è¯»çš„è¡¨è¾¾å¼ã€‚
å¦‚æœå®ƒä¸èƒ½ç«‹å³ä»ä¸Šä¸‹æ–‡ä¸­å˜å¾—æ¸…æ™°ï¼Œè¯·æ˜ç¡®æŒ‡å®šå˜é‡ç±»å‹ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly cpp"><pre tabindex="0" class="prism-code language-cpp codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">int</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> item </span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> container</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  std</span><span class="token operator" style="color:#393A34">::</span><span class="token plain">cout </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> item</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithHideOnScrollNavbar_3R7-" id="credits"></a>Credits<a class="hash-link" href="#credits" title="Direct link to heading">#</a></h2><p>è¿™ä¸ªæ–‡ä»¶ç¿»è¯‘ä¿®æ”¹è‡ª <a href="https://moveit.ros.org/documentation/contributing/code/" target="_blank" rel="noopener noreferrer">MoveIt Code Style Guidelines</a>.</p></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/rm-controls/rm-controls-docs/current_docs/dev_guide/code_style.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/rm-controls-docs/quick_start/code_configuration"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« å®‰è£…</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/rm-controls-docs/dev_guide/ide_config"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">CLion IDE é…ç½® Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#c" class="table-of-contents__link">C++</a></li><li><a href="#ä»£ç å†…æ–‡æ¡£" class="table-of-contents__link">ä»£ç å†…æ–‡æ¡£</a></li><li><a href="#exceptions" class="table-of-contents__link">Exceptions</a></li><li><a href="#logging" class="table-of-contents__link">Logging</a></li><li><a href="#å¼ƒç”¨" class="table-of-contents__link">å¼ƒç”¨</a></li><li><a href="#pre-commit-æ ¼å¼æ£€æŸ¥å™¨" class="table-of-contents__link">pre-commit æ ¼å¼æ£€æŸ¥å™¨</a></li><li><a href="#clang-format-è‡ªåŠ¨ä»£ç æ ¼å¼åŒ–" class="table-of-contents__link">clang-format è‡ªåŠ¨ä»£ç æ ¼å¼åŒ–</a><ul><li><a href="#command-line" class="table-of-contents__link">Command Line</a></li><li><a href="#clang-format-çš„ä¾‹å¤–" class="table-of-contents__link">clang-format çš„ä¾‹å¤–</a></li></ul></li><li><a href="#clang-tidy-linting" class="table-of-contents__link">clang-tidy Linting</a><ul><li><a href="#clang-tidyçš„ä¾‹å¤–" class="table-of-contents__link">clang-tidyçš„ä¾‹å¤–</a></li></ul></li><li><a href="#credits" class="table-of-contents__link">Credits</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021. Distributed by BSD 3-Clause License</div></div></div></footer></div>
<script src="/rm-controls-docs/assets/js/runtime~main.beeb6dbc.js"></script>
<script src="/rm-controls-docs/assets/js/main.f64dfcee.js"></script>
</body>
</html>